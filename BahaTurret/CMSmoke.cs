//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18449
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using System.Collections;
using UnityEngine;
namespace BahaTurret
{
	public class CMSmoke : MonoBehaviour
	{

		void OnEnable()
		{
			StartCoroutine(SmokeRoutine());
		}

		IEnumerator SmokeRoutine()
		{
			yield return new WaitForSeconds(10);

			gameObject.SetActive(false);
		}

		public static bool RaycastSmoke(Ray ray)
		{
			if(!CMDropper.smokePool)
			{
				return false;
			}

			for(int i = 0; i < CMDropper.smokePool.size; i++)
			{
				Transform smokeTf = CMDropper.smokePool.GetPooledObject(i).transform;
				if(smokeTf.gameObject.activeInHierarchy)
				{
					Plane smokePlane = new Plane((ray.origin-smokeTf.position).normalized, smokeTf.position);
					float enter;
					if(smokePlane.Raycast(ray, out enter))
					{
						float sqrDist = (ray.GetPoint(enter)-smokeTf.position).sqrMagnitude;
						if(sqrDist < Mathf.Pow(16,2))
						{
							return true;
						}
					}
				}
			}

			return false;
		}

	}
}

